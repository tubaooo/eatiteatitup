<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ä»Šå¤©åƒä»€éº¼ï¼Ÿ | éš¨æ©Ÿç¾é£ŸæŠ½é¸</title>
    <!-- å¼•å…¥å¤–éƒ¨è³‡æº -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        [v-cloak] { display: none; }
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #0f172a; color: #e2e8f0; margin: 0; }
        .gmnoprint, .gm-style-cc { display: none; }
        .loader {
            border: 3px solid #334155;
            border-top: 3px solid #2dd4bf;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 3px; }
        
        .toggle-checkbox:checked { right: 0; border-color: #14b8a6; }
        .toggle-checkbox:checked + .toggle-label { background-color: #14b8a6; }
    </style>
</head>
<body>

<div id="app" v-cloak class="max-w-md mx-auto min-h-screen bg-slate-900 shadow-2xl flex flex-col border-x border-slate-800">
    
    <header class="bg-slate-800/80 backdrop-blur-md p-5 border-b border-slate-700 sticky top-0 z-30">
        <h1 class="text-xl font-bold text-teal-400 tracking-wider">ä»Šå¤©åƒä»€éº¼ï¼Ÿ</h1>
    </header>

    <div class="flex-1 p-5 overflow-y-auto pb-20">
        
        <div v-if="errorMessage" class="mb-4 bg-red-900/40 border border-red-800 text-red-200 p-3 rounded-xl text-xs flex gap-2 items-start">
            <span>âš ï¸</span>
            <span>{{ errorMessage }}</span>
        </div>

        <!-- 1. æœå°‹è¨­å®šå€ -->
        <div class="bg-slate-800/50 p-5 rounded-2xl border border-slate-700/50 space-y-5 mb-6">
            
            <div>
                <label class="flex items-center gap-2 text-teal-200 text-xs font-bold uppercase mb-2 tracking-widest">
                    <span>ğŸ“</span> æœå°‹å€åŸŸ
                </label>
                <input v-model="searchLocation" type="text" class="w-full p-3 bg-slate-900 border border-slate-700 rounded-xl text-white outline-none focus:ring-2 focus:ring-teal-500 transition-all placeholder-slate-600 text-sm" placeholder="ä¾‹å¦‚ï¼šæ¿æ©‹è»Šç«™">
            </div>

            <div>
                <label class="flex items-center gap-2 text-teal-200 text-xs font-bold uppercase mb-2 tracking-widest">
                    <span>ğŸš«</span> æ’é™¤æ¢ä»¶
                </label>
                <div class="flex flex-wrap gap-2 mb-2">
                    <span v-for="(tag, index) in excludeTags" :key="index" @click="removeTag(index)" class="bg-slate-700 text-slate-300 px-2.5 py-1 rounded-lg text-xs border border-slate-600 hover:bg-red-900/30 transition cursor-pointer flex items-center gap-1">
                        {{ tag }} <span class="text-slate-500">Ã—</span>
                    </span>
                </div>
                <div class="flex gap-2">
                    <input v-model="newExcludeTag" @keyup.enter="addTag" type="text" placeholder="æ–°å¢æ’é™¤ (ä¾‹: å’–å“©)" class="flex-1 p-2.5 bg-slate-900 border border-slate-700 rounded-xl text-sm outline-none focus:border-teal-500 transition-colors">
                    <button @click="addTag" class="bg-slate-700 hover:bg-slate-600 text-white px-3 rounded-xl font-bold transition-colors text-lg">+</button>
                </div>
            </div>

            <div class="flex items-center justify-between bg-slate-900/50 p-3 rounded-xl border border-slate-700/50">
                <span class="text-slate-300 text-sm font-bold">åªé¡¯ç¤ºç›®å‰ç‡Ÿæ¥­ä¸­</span>
                <div class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in">
                    <input type="checkbox" name="toggle" id="toggle" v-model="onlyOpen" class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer transition-all duration-300 ease-in-out" style="top: 2px; left: 2px;"/>
                    <label for="toggle" class="toggle-label block overflow-hidden h-6 rounded-full bg-slate-700 cursor-pointer transition-colors duration-300"></label>
                </div>
            </div>

            <button @click="findLunch" :disabled="isLoading || !isMapsReady" class="w-full bg-teal-600 hover:bg-teal-500 active:scale-95 text-white py-3.5 rounded-xl font-bold text-lg shadow-lg disabled:opacity-50 disabled:scale-100 transition-all flex justify-center items-center gap-2">
                <div v-if="isLoading" class="loader border-white border-t-transparent w-5 h-5 border-2"></div>
                <span v-else>ğŸ² é–‹å§‹éš¨æ©ŸæŠ½é¸</span>
            </button>
        </div>

        <!-- 2. çµæœé¡¯ç¤ºå€ -->
        <div v-if="currentResult" id="result-section" class="animate-slide-up space-y-4 pb-10">
            
            <div class="flex items-center gap-2 text-slate-400 text-xs font-bold uppercase tracking-wider px-2">
                <span>ğŸ‘‡ æŠ½é¸çµæœ</span>
                <span class="flex-1 h-px bg-slate-700"></span>
            </div>

            <div class="bg-slate-800 rounded-3xl shadow-2xl border border-slate-700 overflow-hidden relative">
                
                <!-- é¤å»³åœ–ç‰‡ -->
                <div class="h-64 bg-slate-700 relative group">
                    <img 
                        v-if="currentResult.photos && currentResult.photos.length > 0"
                        :src="currentResult.photos[0].getUrl({maxWidth: 600})" 
                        class="w-full h-full object-cover opacity-90 transition-opacity"
                        alt="é¤å»³ç…§ç‰‡"
                    >
                    <div v-else class="w-full h-full flex flex-col items-center justify-center text-slate-500 gap-2">
                        <span class="text-3xl">ğŸ½ï¸</span>
                        <span class="text-xs">æš«ç„¡ç…§ç‰‡</span>
                    </div>
                    
                    <div class="absolute top-4 right-4 bg-black/70 backdrop-blur-md px-3 py-1.5 rounded-xl text-sm font-bold text-yellow-400 border border-white/10 shadow-lg flex items-center gap-1.5">
                        <span>â­</span> {{ currentResult.rating || 'N/A' }}
                    </div>
                </div>

                <div class="p-6">
                    <h2 class="text-2xl font-bold text-white leading-tight mb-2">{{ currentResult.name }}</h2>
                    
                    <!-- ç‡Ÿæ¥­æ™‚é–“é¡¯ç¤º -->
                    <div class="flex flex-wrap gap-2 mb-4 items-center">
                        <div :class="isOpenNow ? 'bg-teal-900/60 text-teal-300 border-teal-700/50' : 'bg-red-900/60 text-red-300 border-red-700/50'" 
                             class="border text-sm px-3 py-1.5 rounded-lg font-bold flex items-center gap-2 shadow-sm">
                            <span v-if="isOpenNow" class="w-2 h-2 rounded-full bg-teal-400 animate-pulse"></span>
                            {{ displayTimeText }}
                        </div>
                        <span v-if="currentResult.user_ratings_total" class="bg-blue-900/50 text-blue-300 border border-blue-800 text-xs px-3 py-1.5 rounded-lg font-medium">
                            {{ currentResult.user_ratings_total }} å‰‡è©•è«–
                        </span>
                    </div>

                    <p class="text-slate-400 text-sm mb-6 flex items-start gap-2 leading-relaxed">
                        <span class="mt-0.5">ğŸ“</span> {{ currentResult.vicinity || currentResult.formatted_address }}
                    </p>

                    <!-- äº¤é€šæ™‚é–“å¡ç‰‡ (æ™ºæ…§åˆ¤æ–·ç‰ˆ) -->
                    <div class="bg-slate-900/80 rounded-2xl p-4 border border-slate-700/50 mb-6 relative overflow-hidden">
                        
                        <!-- èµ·é» -->
                        <div class="flex items-center gap-2 mb-3 text-xs text-slate-500 border-b border-slate-700/50 pb-2">
                            <span class="bg-slate-700 text-slate-300 px-1.5 py-0.5 rounded text-[10px] font-bold">FROM</span>
                            <span class="truncate max-w-[150px] font-medium text-slate-300">{{ searchLocation }}</span>
                        </div>

                        <!-- å»ºè­°æ¨™é¡Œ -->
                        <div class="flex justify-between items-center mb-1 relative z-10">
                            <p class="text-xs font-bold uppercase tracking-wider flex items-center gap-1" 
                               :class="finalTravelMode === 'TRANSIT' ? 'text-blue-400' : 'text-teal-500'">
                                <span v-if="finalTravelMode === 'TRANSIT'">ğŸšŒ å»ºè­°æ­ä¹˜</span>
                                <span v-else>ğŸš¶ å»ºè­°æ­¥è¡Œ</span>
                            </p>
                            <!-- å¦‚æœæ˜¯å…¬è»Šï¼Œé¡¯ç¤ºè·¯ç·š -->
                            <span v-if="finalTravelMode === 'TRANSIT' && transitLine" class="text-xs bg-blue-900/50 text-blue-200 px-2 py-0.5 rounded border border-blue-800/50">
                                {{ transitLine }}
                            </span>
                        </div>
                        
                        <!-- è¨ˆç®—ä¸­ç‹€æ…‹ -->
                        <div v-if="isCalculatingTime" class="flex items-center gap-2 text-slate-400 text-sm py-2">
                            <div class="loader w-4 h-4 border-2"></div> åˆ†ææœ€ä½³è·¯å¾‘...
                        </div>
                        
                        <!-- çµæœé¡¯ç¤º -->
                        <div v-else-if="travelInfo" class="relative z-10">
                            <div class="flex items-baseline gap-2">
                                <span class="text-4xl font-bold" :class="finalTravelMode === 'TRANSIT' ? 'text-blue-400' : 'text-teal-400'">
                                    {{ travelInfo.duration.text }}
                                </span>
                                <span class="text-sm text-slate-500 font-medium">{{ travelInfo.distance.text }}</span>
                            </div>
                            <!-- æ¯”è¼ƒæç¤ºèª -->
                            <p v-if="comparisonNote" class="text-xs text-slate-500 mt-1 italic">
                                * {{ comparisonNote }}
                            </p>
                        </div>
                        
                        <div v-else class="text-sm text-slate-500 italic py-2">è·é›¢å¤ªè¿‘æˆ–ç„¡æ³•è¨ˆç®—</div>
                    </div>

                    <div class="grid grid-cols-2 gap-3">
                        <a :href="'https://www.google.com/maps/search/?api=1&query=' + encodeURIComponent(currentResult.name) + '&query_place_id=' + currentResult.place_id" target="_blank" class="bg-teal-600 hover:bg-teal-500 active:scale-95 text-white py-4 rounded-xl text-center font-bold text-sm transition-all shadow-lg shadow-teal-900/20">
                            é–‹å•Ÿåœ°åœ–å°èˆª
                        </a>
                        <button @click="reset" class="border border-slate-600 text-slate-300 hover:bg-slate-800 active:scale-95 py-4 rounded-xl font-bold text-sm transition-all">
                            æ¸…é™¤çµæœ
                        </button>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<script>
    // ä½ çš„ API é‡‘é‘°å·²ç¶“è‡ªå‹•å¡«å…¥
    const YOUR_API_KEY = 'AIzaSyC0LqN7gsdMS1fI8brrHDelMW7KzddInJM'; 

    const { createApp } = Vue;
    createApp({
        data() {
            return {
                isMapsReady: false,
                searchLocation: 'æ¿æ©‹è»Šç«™',
                newExcludeTag: '',
                excludeTags: ['é€Ÿé£Ÿ', 'æ˜Ÿå·´å…‹', 'ç”œé»', 'éº¥ç•¶å‹'],
                onlyOpen: true,
                
                currentResult: null,
                isLoading: false,
                isCalculatingTime: false,
                errorMessage: '',
                
                // äº¤é€šæ¯”è¼ƒç›¸é—œ
                travelInfo: null, // æœ€çµ‚é¡¯ç¤ºçš„é‚£å€‹ (å¯èƒ½æ˜¯èµ°è·¯æˆ–æ­è»Š)
                finalTravelMode: 'WALKING', // 'WALKING' or 'TRANSIT'
                transitLine: '', // ä¾‹å¦‚ "307è™Ÿå…¬è»Š"
                comparisonNote: '', // ä¾‹å¦‚ "èµ°è·¯æ¯”è¼ƒå¿«"
                
                displayTimeText: '', 
                isOpenNow: false
            }
        },
        mounted() {
            this.initGoogleMaps();
        },
        methods: {
            initGoogleMaps() {
                window.initMapCallback = () => {
                    try {
                        const dummyDiv = document.createElement('div');
                        const map = new google.maps.Map(dummyDiv);
                        this.service = new google.maps.places.PlacesService(map);
                        this.geocoder = new google.maps.Geocoder();
                        this.directionsService = new google.maps.DirectionsService(); // æ”¹ç”¨ DirectionsService å–å¾—è©³ç´°è·¯ç·š
                        this.isMapsReady = true;
                    } catch (e) {
                        this.errorMessage = "åœ°åœ–åˆå§‹åŒ–éŒ¯èª¤: " + e.message;
                    }
                };

                const script = document.createElement('script');
                script.src = `https://maps.googleapis.com/maps/api/js?key=${YOUR_API_KEY}&libraries=places&language=zh-TW&callback=initMapCallback`;
                script.async = true;
                script.onerror = () => { this.errorMessage = "ç„¡æ³•é€£ç·šè‡³ Google ä¼ºæœå™¨ï¼Œè«‹æª¢æŸ¥ç¶²è·¯æˆ– API æ¬Šé™ã€‚"; };
                document.head.appendChild(script);
            },
            addTag() {
                if (this.newExcludeTag.trim()) {
                    this.excludeTags.push(this.newExcludeTag.trim());
                    this.newExcludeTag = '';
                }
            },
            removeTag(idx) { this.excludeTags.splice(idx, 1); },
            
            findLunch() {
                if (!this.isMapsReady) return;
                this.isLoading = true;
                this.errorMessage = '';
                this.currentResult = null;
                this.travelInfo = null;

                this.geocoder.geocode({ address: this.searchLocation }, (results, status) => {
                    if (status === 'OK') {
                        const loc = results[0].geometry.location;
                        this.fetchPlaces(loc);
                    } else {
                        this.isLoading = false;
                        this.errorMessage = "æ‰¾ä¸åˆ°é€™å€‹åœ°é»ï¼Œè«‹è¼¸å…¥æ›´å…·é«”çš„åœ°å€æˆ–åœ°æ¨™ã€‚";
                    }
                });
            },
            
            fetchPlaces(location) {
                const req = { 
                    location, 
                    radius: 1500, 
                    type: 'restaurant',
                    openNow: this.onlyOpen 
                };

                this.service.nearbySearch(req, (results, status) => {
                    if (status === 'OK' && results.length > 0) {
                        const filtered = results.filter(p => !this.excludeTags.some(tag => p.name.includes(tag)));
                        if (filtered.length > 0) {
                            const winner = filtered[Math.floor(Math.random() * filtered.length)];
                            this.fetchDetails(winner.place_id, location);
                        } else {
                            this.errorMessage = "é™„è¿‘æ²’åƒçš„ï¼Œæˆ–å…¨éƒ¨éƒ½è¢«æ’é™¤æ‰äº†ã€‚";
                            this.isLoading = false;
                        }
                    } else {
                        this.errorMessage = "æ‰¾ä¸åˆ°ç¬¦åˆæ¢ä»¶çš„é¤å»³";
                        this.isLoading = false;
                    }
                });
            },

            fetchDetails(placeId, userLoc) {
                const request = {
                    placeId: placeId,
                    fields: ['name', 'rating', 'formatted_address', 'vicinity', 'photos', 'opening_hours', 'geometry', 'user_ratings_total', 'place_id']
                };

                this.service.getDetails(request, (place, status) => {
                    if (status === 'OK') {
                        this.currentResult = place;
                        this.processOpeningHours(place);
                        this.compareTravelOptions(userLoc, place.geometry.location); // åŸ·è¡Œæ™ºæ…§æ¯”è¼ƒ
                        
                        this.$nextTick(() => {
                            const el = document.getElementById('result-section');
                            if(el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        });
                    } else {
                        this.errorMessage = "ç„¡æ³•å–å¾—åº—å®¶è©³ç´°è³‡æ–™";
                    }
                    this.isLoading = false;
                });
            },

            processOpeningHours(place) {
                this.displayTimeText = 'æ™‚é–“æœªçŸ¥';
                this.isOpenNow = false;
                const jsDay = new Date().getDay();
                const daysMap = ['é€±æ—¥', 'é€±ä¸€', 'é€±äºŒ', 'é€±ä¸‰', 'é€±å››', 'é€±äº”', 'é€±å…­'];
                const currentDayName = daysMap[jsDay];

                if (place.opening_hours) {
                    this.isOpenNow = place.opening_hours.isOpen();
                    if (place.opening_hours.weekday_text && place.opening_hours.weekday_text.length > 0) {
                        const googleIndex = (jsDay === 0) ? 6 : jsDay - 1;
                        let todayStrRaw = place.opening_hours.weekday_text[googleIndex];
                        if (todayStrRaw) {
                            const colonIndex = todayStrRaw.indexOf(':');
                            if (colonIndex > -1) {
                                let timePart = todayStrRaw.substring(colonIndex + 1).trim();
                                timePart = timePart.replace('â€“', '~').replace('-', '~');
                                if (timePart === 'ä¼‘æ¯' || timePart === 'Closed') {
                                    this.displayTimeText = `${currentDayName} ä¼‘æ¯ä¸­`;
                                } else {
                                    this.displayTimeText = `${currentDayName} ${timePart}`;
                                }
                            } else {
                                this.displayTimeText = todayStrRaw;
                            }
                        }
                    } 
                    if (place.opening_hours.open_now && !this.displayTimeText.includes('~')) {
                         if(this.displayTimeText === 'æ™‚é–“æœªçŸ¥') {
                             this.displayTimeText = this.isOpenNow ? `${currentDayName} ç‡Ÿæ¥­ä¸­` : `${currentDayName} ä¼‘æ¯ä¸­`;
                         }
                    }
                } else {
                    this.displayTimeText = `${currentDayName} ä¼‘æ¯ä¸­`;
                }
                
                if (this.displayTimeText === 'æ™‚é–“æœªçŸ¥') {
                    this.displayTimeText = `${currentDayName} ä¼‘æ¯ä¸­`;
                }
            },

            // æ ¸å¿ƒåŠŸèƒ½ï¼šæ¯”è¼ƒèµ°è·¯èˆ‡æ­è»Š
            compareTravelOptions(origin, dest) {
                this.isCalculatingTime = true;
                this.travelInfo = null;
                this.transitLine = '';
                this.comparisonNote = '';
                
                // åŒæ™‚ç™¼é€å…©å€‹è«‹æ±‚
                const walkReq = { origin, destination: dest, travelMode: 'WALKING' };
                const transitReq = { origin, destination: dest, travelMode: 'TRANSIT', transitOptions: { modes: ['BUS', 'SUBWAY'] } };

                // ä½¿ç”¨ Promise ä¾†è™•ç†ä¸¦è¡Œè«‹æ±‚ (å› ç‚º DirectionsService æ˜¯éåŒæ­¥çš„)
                const getRoute = (req) => {
                    return new Promise((resolve) => {
                        this.directionsService.route(req, (res, status) => {
                            if (status === 'OK') resolve(res.routes[0].legs[0]);
                            else resolve(null);
                        });
                    });
                };

                Promise.all([getRoute(walkReq), getRoute(transitReq)]).then(([walkRes, transitRes]) => {
                    this.isCalculatingTime = false;
                    
                    // 1. å¦‚æœèµ°è·¯è³‡æ–™éƒ½æ‹¿ä¸åˆ°ï¼Œé‚£ä¹Ÿæ²’å¾—è«‡äº†
                    if (!walkRes) {
                        this.finalTravelMode = 'WALKING'; // é¡¯ç¤ºå¤±æ•—ç‹€æ…‹
                        return;
                    }

                    const walkSec = walkRes.duration.value;
                    const walkMin = Math.ceil(walkSec / 60);

                    // 2. åˆ¤æ–·é‚è¼¯
                    
                    // æƒ…æ³ A: èµ°è·¯å¾ˆè¿‘ (å°æ–¼ 20 åˆ†é˜) -> ç›´æ¥èµ°è·¯ï¼Œä¸ç”¨ç®¡å…¬è»Š
                    if (walkMin <= 20) {
                        this.setWalkingResult(walkRes);
                        this.comparisonNote = "è·é›¢é©ä¸­ï¼Œèµ°è·¯æœ€æ–¹ä¾¿";
                        return;
                    }

                    // æƒ…æ³ B: èµ°è·¯æœ‰é»é ï¼Œæª¢æŸ¥æœ‰æ²’æœ‰å…¬è»Š
                    if (transitRes) {
                        const transitSec = transitRes.duration.value;
                        const transitMin = Math.ceil(transitSec / 60);
                        
                        // åªæœ‰ç•¶å…¬è»Šã€Œé¡¯è‘—ã€æ¯”è¼ƒå¿« (ä¾‹å¦‚çœä¸‹ 10 åˆ†é˜ä»¥ä¸Š) ä¸” ç¸½æ™‚é•·ç¢ºå¯¦æ¯”èµ°è·¯çŸ­
                        // æˆ–è€…å…¬è»Šæ™‚é–“æ˜¯èµ°è·¯çš„ä¸€åŠä»¥ä¸‹
                        if ((walkMin - transitMin > 10) || (transitMin < walkMin * 0.6)) {
                            // æª¢æŸ¥å…¬è»Šä¾¿åˆ©æ€§ï¼šå¦‚æœæ­å…¬è»Šé‚„è¦èµ°å¾ˆé  (ä¾‹å¦‚èµ°è·¯è·é›¢è¶…é 1 å…¬é‡Œ)ï¼Œé‚£é‚„æ˜¯ç®—äº†
                            // Directions API ä¸ä¸€å®šç›´æ¥çµ¦ walking_distanceï¼Œé€™è£¡ç°¡åŒ–è™•ç†
                            
                            this.setTransitResult(transitRes, transitRes.steps);
                            this.comparisonNote = `æ¯”èµ°è·¯å¿«ç´„ ${walkMin - transitMin} åˆ†é˜`;
                        } else {
                            // å…¬è»Šæ²’å¿«å¤šå°‘ï¼Œé‚„æ˜¯èµ°è·¯å§ (é¿å…ç­‰è»Š)
                            this.setWalkingResult(walkRes);
                            this.comparisonNote = "æ­è»Šæ²’å¿«å¤šå°‘ï¼Œèµ°è·¯è¼ƒå–®ç´”";
                        }
                    } else {
                        // æ²’å…¬è»Šï¼Œåªèƒ½èµ°
                        this.setWalkingResult(walkRes);
                        this.comparisonNote = "é™„è¿‘ç„¡ä¾¿æ·å¤§çœ¾é‹è¼¸";
                    }
                });
            },

            setWalkingResult(res) {
                this.finalTravelMode = 'WALKING';
                this.travelInfo = res;
                this.transitLine = '';
            },

            setTransitResult(res, steps) {
                this.finalTravelMode = 'TRANSIT';
                this.travelInfo = res;
                
                // å˜—è©¦å¾æ­¥é©Ÿä¸­æŠ“å‡ºå…¬è»Šæˆ–æ·é‹çš„åç¨±
                // å°‹æ‰¾ç¬¬ä¸€å€‹ travel_mode ç‚º TRANSIT çš„æ­¥é©Ÿ
                const transitStep = steps.find(step => step.travel_mode === 'TRANSIT');
                if (transitStep && transitStep.transit) {
                    const line = transitStep.transit.line;
                    if (line.short_name) {
                        this.transitLine = line.short_name + (line.vehicle.type === 'BUS' ? 'è™Ÿå…¬è»Š' : '');
                    } else if (line.name) {
                        this.transitLine = line.name;
                    }
                } else {
                    this.transitLine = 'å¤§çœ¾é‹è¼¸';
                }
            },

            reset() {
                this.currentResult = null;
                this.travelInfo = null;
            }
        }
    }).mount('#app');
</script>
</body>
</html>